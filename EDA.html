<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Yuxuan Wang" />

<meta name="date" content="2021-11-23" />

<title>EDA</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Proposal.html">Proposal</a>
</li>
<li>
  <a href="EDA.html">Exploratory Analyses</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Recommendation Algorithm
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="tree-based-bootstraping.html">tree-based bootstraping</a>
    </li>
    <li>
      <a href="user_similarity.html">user-similarity based recommendation</a>
    </li>
    <li>
      <a href="SVD.html">SVD</a>
    </li>
    <li>
      <a href="tag_system_recommendation.html">tag-based recommendation</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://hzhong.shinyapps.io/movierecommender/">Shinyapp</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ShaocongZ/Final_Project/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">EDA</h1>
<h4 class="author">Yuxuan Wang</h4>
<h4 class="date">11/23/2021</h4>

</div>


<p> </p>
<div id="introduction-background-of-data-sets" class="section level1">
<h1>Introduction &amp; Background of data sets</h1>
<ul>
<li>Dataset source used for EDA analysis: <a href="https://grouplens.org/datasets/movielens/latest/">MoiveLens dataset</a></li>
<li>MovieLens, a movie recommendation service, provided this dataset (ml-latest-small), which describes 5-star rating and free-text tagging activities. Over 9742 movies, it has 100836 ratings and 3683 tag applications. Between March 29, 1996, and September 24, 2018, 610 people produced this data. On September 26, 2018, this dataset was created.</li>
<li>The participants were chosen at random. All of the individuals that were chosen had rated at least 20 films. There is no demographic information provided. An id is assigned to each user, and no additional information is supplied.</li>
<li>The files links.csv, movies.csv, ratings.csv, and tags.csv contain the data. Following are more details on the contents and use of each of these files.</li>
</ul>
<p> </p>
</div>
<div id="overview-of-data-sets" class="section level1">
<h1>Overview of data sets</h1>
<ul>
<li>Here, we decided to use “Small” dataset, which includes 100,000 ratings and 3,600 tag applications applied to 9,000 movies by 600 users(Last updated 9/2018).</li>
<li>Dataset “links.csv” has 3 variables, including movieId(movie ID),imdbId(IMDb ID) and tmdbId(TMDB ID).</li>
<li>“movies.csv” is a dataset which includes movieId(movie ID), title(movie title) and genres(movie genres). For variable title(movie title), it contains movies like “Toy Story (1995)”, “The Shape of Water (2017)”, “Holy Man (1998)”, “Class (1983)”,etc. The variable genres(movie genres) includes genres like Comedy, Drama, Sci-Fi, Horror, Thriller,etc.</li>
<li>In “ratings.csv” dataset, there are 4 variables. userId represent the user ID, movieId represent movie ID, rating represent the ratings of movies, and timestamp represent a digital record of the time of occurrence of a particular movie. Last but not the least, rating represent the ratings of movies. The rating variable includes score like 0.5, 2, 3, 4, 4.5, 5,etc.</li>
<li>Dataset “tag.csv” has 4 variables, including userId(user ID),movieId(movie ID),tag(tag of movies) and timestamp(digital record of the time of occurrence of a particular movie). The variable tag includes tags like funny, brit-pop, wedding, revenge,etc.</li>
<li>In our Exploratory Analyses, we mainly focus on the following datasets :“ratings.csv”and “movies.csv”.</li>
</ul>
<p> </p>
</div>
<div id="summary-of-the-used-packages-and-dependencies" class="section level1">
<h1>Summary of the used packages and dependencies</h1>
<ul>
<li>tidyverse, readr, ggplot2, kableExtra, pastecs, ggpubr, tm.</li>
</ul>
<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(ggplot2)
library(kableExtra)
library(pastecs)
library(ggpubr)
library(tm)</code></pre>
<p> </p>
</div>
<div id="overview-of-dataset-ratings.csv" class="section level1">
<h1>Overview of dataset “ratings.csv”</h1>
<ul>
<li><p><strong>Here, we applied the “summarise()” function to briefly describe the variable “rating”</strong>: According to the result, variable rating show that the minimum is 0.5, the first quantile is 3,median is 3.5,mean is 3.502,third quantile is 4 and the maximum is 5.</p></li>
<li><p>Since userid ,movieid,timestamp only represent the ID of users, id of movies respectively,and digital record of the time of occurrence of a particular movie, <strong>we choose not to analyze those three variables </strong></p></li>
</ul>
<pre class="r"><code>data_path = &quot;./data/small/ratings.csv&quot;</code></pre>
<pre class="r"><code>summary_df = 
  read_csv(data_path, col_types = &quot;ccnc&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  summary(summary_df$rating) %&gt;% 
  knitr::kable() %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;)) %&gt;%
  kableExtra::kable_styling(font_size = 12)
summary_df</code></pre>
<table class="table table-striped table" style="margin-left: auto; margin-right: auto; font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
user_id
</th>
<th style="text-align:left;">
movie_id
</th>
<th style="text-align:left;">
rating
</th>
<th style="text-align:left;">
timestamp
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Length:100836
</td>
<td style="text-align:left;">
Length:100836
</td>
<td style="text-align:left;">
Min. :0.500
</td>
<td style="text-align:left;">
Length:100836
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Class :character
</td>
<td style="text-align:left;">
Class :character
</td>
<td style="text-align:left;">
1st Qu.:3.000
</td>
<td style="text-align:left;">
Class :character
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Mode :character
</td>
<td style="text-align:left;">
Mode :character
</td>
<td style="text-align:left;">
Median :3.500
</td>
<td style="text-align:left;">
Mode :character
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Mean :3.502
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
3rd Qu.:4.000
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Max. :5.000
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p> </p>
</div>
<div id="overview-of-dataset-movies.csv" class="section level1">
<h1>Overview of dataset “movies.csv”</h1>
<ul>
<li><strong>We count the 5 most appeared genres and made a table</strong> : Drama appeared 4361 times,1st place. Comedy appeared 3756 times, 2nd place. Thriller appeared 1894 times, 3rd place. Action appeared 1828 times, 4th place.Romance appeared 1596 time, 5 th place._</li>
<li><strong>We count the 5 most appeared year of the movie released, and made a table</strong>:2006 appeared 733 times,1st place. 2009 appeared 719 times, 2nd place. 2005 appeared 709 times, 3rd place. 2002 appeared 705 times, 4th place. 2008 appeared 691 time, 5 th place.</li>
</ul>
<pre class="r"><code>data_path = &quot;./data/small/movies.csv&quot;

movie_descriptive = 
  read_csv(&quot;./data/small/movies.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;%
  separate(
  title, c(&quot;name&quot;, &quot;year&quot;), sep=&quot;\\s+(?=\\S*$)&quot;) %&gt;% 
  separate_rows(genres, sep = &quot;[|]&quot;) 
  
genres_count =
  movie_descriptive %&gt;% 
  group_by(genres) %&gt;% 
  count(genres) %&gt;% 
  filter(n &gt;= 1500) %&gt;% 
  arrange(desc(n)) %&gt;% 
  knitr::kable() %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;))
genres_count</code></pre>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
genres
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Drama
</td>
<td style="text-align:right;">
4361
</td>
</tr>
<tr>
<td style="text-align:left;">
Comedy
</td>
<td style="text-align:right;">
3756
</td>
</tr>
<tr>
<td style="text-align:left;">
Thriller
</td>
<td style="text-align:right;">
1894
</td>
</tr>
<tr>
<td style="text-align:left;">
Action
</td>
<td style="text-align:right;">
1828
</td>
</tr>
<tr>
<td style="text-align:left;">
Romance
</td>
<td style="text-align:right;">
1596
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>year_count =
  movie_descriptive %&gt;% 
  group_by(year) %&gt;% 
  count(year) %&gt;% 
  filter(n &gt;= 690) %&gt;% 
  arrange(desc(n)) %&gt;%  
  knitr::kable() %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;)) %&gt;%
  kableExtra::kable_styling(font_size = 12)
year_count</code></pre>
<table class="table table-striped table" style="margin-left: auto; margin-right: auto; font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
n
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<ol start="2006" style="list-style-type: decimal">
<li></td>
<td style="text-align:right;">
733
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="2009" style="list-style-type: decimal">
<li></td>
<td style="text-align:right;">
719
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="2005" style="list-style-type: decimal">
<li></td>
<td style="text-align:right;">
709
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="2002" style="list-style-type: decimal">
<li></td>
<td style="text-align:right;">
705
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="2008" style="list-style-type: decimal">
<li></td>
<td style="text-align:right;">
691
</td>
</tr>
</tbody>
</table></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol>
<p> </p>
</div>
<div id="find-popular-movies-and-high-rating-movies" class="section level1">
<h1>Find popular movies and high-rating movies</h1>
<ul>
<li><strong>Find popular movies and high-rating movies</strong> : In order to find the top 5 popular movies with highest rating, we filtered movies with rating less than 5, and count the 5 most rated movies. The Shawshank Redemption (1994) is the most popular movie, which has 153 times user rating. No.2 Pulp Fiction (1994), has 123 times user rating. 116 times user rating, Forrest Gump (1994) wins the 3rd popular place. The Matrix (1999) has 109 times user rating,and is the fourth place among the top 5 popular movies. No. 5 is Star Wars: Episode IV - A New Hope (1977), and it has 104 times user rating. We also find out that among those 5 most rated movies and highest rating movies, genres with tag drama appears the most(3 times, appear in Forrest Gump (1994), Pulp Fiction (1994),The Shawshank Redemption (1994)). We also find out one interesting fact is that among the 5 most popular movies and 5 highest rating movies, 3 movies are released in 1994; 4 movies are released in the 90s.</li>
</ul>
<pre class="r"><code>data_path = &quot;./data/small/ratings.csv&quot;

rating_tidy = 
  read_csv(data_path, col_types = &quot;ccnc&quot;) %&gt;% 
    janitor::clean_names() %&gt;% 
    select(-timestamp) %&gt;% 
    mutate(rating = as.double(rating))  

high_rating = 
  rating_tidy %&gt;% 
  filter(rating == 5.0) 

movie_names = 
  read_csv(&quot;./data/small/movies.csv&quot;) %&gt;% 
  rename(movie_id = movieId)</code></pre>
<pre class="r"><code>high_rating_movienames = 
  merge(high_rating, movie_names) %&gt;% 
  group_by(title, genres,rating) %&gt;% 
  count(movie_id) %&gt;% 
  filter(n &gt;= 100) %&gt;% 
  select(n,title,genres,rating) %&gt;% 
  ungroup(title, genres,rating) %&gt;% 
  arrange(desc(n)) %&gt;% 
  separate(
  title, c(&quot;name&quot;, &quot;year&quot;), sep=&quot;\\s+(?=\\S*$)&quot;) %&gt;% 
  knitr::kable() %&gt;% 
  kable_styling(bootstrap_options = c(&quot;striped&quot;)) %&gt;%
  kableExtra::kable_styling(font_size = 12)
  
high_rating_movienames </code></pre>
<table class="table table-striped table" style="margin-left: auto; margin-right: auto; font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
n
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:left;">
genres
</th>
<th style="text-align:right;">
rating
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
153
</td>
<td style="text-align:left;">
Shawshank Redemption, The
</td>
<td style="text-align:left;">
<ol start="1994" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Crime|Drama
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
123
</td>
<td style="text-align:left;">
Pulp Fiction
</td>
<td style="text-align:left;">
<ol start="1994" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Comedy|Crime|Drama|Thriller
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
116
</td>
<td style="text-align:left;">
Forrest Gump
</td>
<td style="text-align:left;">
<ol start="1994" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Comedy|Drama|Romance|War
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
109
</td>
<td style="text-align:left;">
Matrix, The
</td>
<td style="text-align:left;">
<ol start="1999" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Action|Sci-Fi|Thriller
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
104
</td>
<td style="text-align:left;">
Star Wars: Episode IV - A New Hope
</td>
<td style="text-align:left;">
<ol start="1977" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Action|Adventure|Sci-Fi
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol>
<p> </p>
</div>
<div id="find-the-average-rating-of-each-genres-in-different-year" class="section level1">
<h1>Find the average rating of each genres in different year</h1>
<ul>
<li><strong>Find the average rating of each genres in different year</strong>: In 1902, the average ratings for genres Action, Adventure, Fantasy, Sci-Fi are all 3.5. In 1903, the average ratings for genres Crime and Western are both 2.5. The averages for genres Animation, Comedy, Sci-Fi in 1908 are all 4.0. The genre Drama’s average ratings in 1915 is 2.0.</li>
</ul>
<pre class="r"><code>movie_names_ave = 
  read_csv(&quot;./data/small/movies.csv&quot;) %&gt;% 
  rename(movie_id = movieId) %&gt;% 
  separate(
  title, c(&quot;name&quot;, &quot;year&quot;), sep=&quot;\\s+(?=\\S*$)&quot;) %&gt;% 
  separate_rows(genres, sep = &quot;[|]&quot;) %&gt;%
  filter(!genres  %in% &quot;(no genres listed)&quot;) </code></pre>
<pre class="r"><code>filter_ratingscore = 
  rating_tidy  
ave_rating = 
  merge(filter_ratingscore, movie_names_ave) %&gt;% 
  group_by(year,genres) %&gt;%
  summarize(mu_rating = mean(rating)) %&gt;% 
  head(10) %&gt;% 
  knitr::kable() %&gt;%
kable_styling(bootstrap_options = c(&quot;striped&quot;)) %&gt;%
  kableExtra::kable_styling(font_size = 12)
ave_rating</code></pre>
<table class="table table-striped table" style="margin-left: auto; margin-right: auto; font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
year
</th>
<th style="text-align:left;">
genres
</th>
<th style="text-align:right;">
mu_rating
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<ol start="1902" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Action
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1902" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Adventure
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1902" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Fantasy
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1902" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Sci-Fi
</td>
<td style="text-align:right;">
3.5
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1903" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Crime
</td>
<td style="text-align:right;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1903" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Western
</td>
<td style="text-align:right;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1908" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Animation
</td>
<td style="text-align:right;">
4.0
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1908" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Comedy
</td>
<td style="text-align:right;">
4.0
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1908" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Sci-Fi
</td>
<td style="text-align:right;">
4.0
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="1915" style="list-style-type: decimal">
<li></td>
<td style="text-align:left;">
Drama
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
</tbody>
</table></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol>
<p> </p>
</div>
<div id="rating-distribution-among-different-genres" class="section level1">
<h1>Rating distribution among different genres</h1>
<ul>
<li><strong>The boxplot regarding ratings and genres shows</strong>: The spread of the ratings of War, Mystery,Horror and Crime are larger comparing to the other ratings of genres. All of ratings have outliers around either 1.0 point or 0.5 point. The ratings of genres Film-Noir and documentary have outliers at 1.5 points.We can also conclude that the mean of the ratings of genres like Thriller,sci-fi, Romance, Musical, Horror, Fantasy, Comedy, Children, Adventure and Action all equal to 3.5. The mean of the ratings of genres include Western, War, Mystery, IMAX, Film-Noir, Drama, Documentary, Crime and Animation all equal to 4.</li>
</ul>
<pre class="r"><code>movie_names = 
  read_csv(&quot;./data/small/movies.csv&quot;) %&gt;% 
  rename(movie_id = movieId) %&gt;% 
  separate(
  title, c(&quot;name&quot;, &quot;year&quot;), sep=&quot;\\s+(?=\\S*$)&quot;) 

filter_ratingscore = 
  rating_tidy  </code></pre>
<pre class="r"><code>boxplot_df = 
  merge(filter_ratingscore, movie_names) %&gt;%
  janitor::clean_names() %&gt;%
  separate_rows(genres, sep = &quot;[|]&quot;) %&gt;%
  filter(!genres  %in% &quot;(no genres listed)&quot;) %&gt;% 
  ggplot(aes(x = rating, y = genres)) + geom_boxplot(aes(color = genres, alpha = .5)) +
  theme(legend.position=&quot;none&quot;) 
  viridis::scale_color_viridis(discrete = TRUE)
boxplot_df </code></pre>
<p><img src="EDA_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p> </p>
</div>
<div id="rating-distribution-among-different-years" class="section level1">
<h1>Rating distribution among different years</h1>
<ul>
<li><strong>The boxplot regarding ratings and year shows</strong>: Since this dataset include too much year, we choose to show only part of the boxplot regarding year and rating. According to the boxplot, we can conclude that the rating of years including 2010, 2009, 2007,2006 and 1998 have the least rating data records. There is no obovious trend shown in the plot.</li>
</ul>
<pre class="r"><code>movie_names = 
  read_csv(&quot;./data/small/movies.csv&quot;) %&gt;% 
  rename(movie_id = movieId) %&gt;% 
  separate(
  title, c(&quot;name&quot;, &quot;year&quot;), sep=&quot;\\s+(?=\\S*$)&quot;) </code></pre>
<pre class="r"><code>boxplot_df2 = 
  merge(filter_ratingscore, movie_names) %&gt;%
  mutate(
    year = removePunctuation(year)
  ) %&gt;% 
  head(1000) %&gt;% 
  ggplot(aes(x = rating, y = year)) + geom_boxplot(aes(color = year))+
  theme(legend.position=&quot;none&quot;) 
  viridis::scale_fill_viridis(discrete = TRUE)

boxplot_df2 </code></pre>
<p><img src="EDA_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p> </p>
</div>
<div id="kruskal-wallis-test-regarding-user-id-and-rating" class="section level1">
<h1>Kruskal-Wallis Test regarding user ID and rating</h1>
<ul>
<li>Here, we want to do a test to determine whether there are any statistically significant differences between the mean ratings of the user from the 600 users are different(ANOVA)</li>
<li>First, we checked whether the rating is normally distributed.</li>
</ul>
<pre class="r"><code>ggplot(filter_ratingscore, aes(x = rating, y = ..density..)) + 
  geom_histogram(alpha = 0.3, bins = 30) </code></pre>
<p><img src="EDA_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<ul>
<li>The plot shows that the rating is not normally distributed, we need to use non parametric test.</li>
<li>Thus, we used the Kruskal-Wallis Test regarding user ID and rating.</li>
<li>The Kruskal-Wallis H test (also known as the “one-way ANOVA on ranks”) is a rank-based nonparametric test that may be used to see if two or more groups of an independent variable on a continuous or ordinal dependent variable have statistically significant differences. It is the nonparametric counterpart of the one-way ANOVA (Kruskal-Wallis H Test in SPSS Statistics | Procedure, output and interpretation of the output using a relevant example., 2021)</li>
</ul>
<p><strong>Assumption</strong></p>
<p><span class="math inline">\(H_0:\mu_{0}=\mu_1=\mu_2=\mu_3=...=\mu _x\)</span></p>
<p><span class="math inline">\(H_1: \text{At least two of the mean ratings of the users are different}\)</span></p>
<pre class="r"><code>kruskal.test(rating ~ user_id, data = filter_ratingscore) %&gt;% 
 broom::tidy() %&gt;% 
 kableExtra::kbl() %&gt;% 
 kable_styling(bootstrap_options = c(&quot;striped&quot;)) %&gt;%
  kableExtra::kable_styling(font_size = 12)</code></pre>
<table class="table table-striped table" style="margin-left: auto; margin-right: auto; font-size: 12px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p.value
</th>
<th style="text-align:right;">
parameter
</th>
<th style="text-align:left;">
method
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
20676.72
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
609
</td>
<td style="text-align:left;">
Kruskal-Wallis rank sum test
</td>
</tr>
</tbody>
</table>
<p><strong>Notice</strong>: The p values here is less than 2.2e-16 and is too small to be shown in r. Thus,the p value shown in table here is 0.</p>
<ul>
<li><strong>Conclusion:At 0.05 significance level, we reject the null hypothesis and conclude that at least two of the mean ratings of the user from the 600 users are different.</strong></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
