---
title: "test_shiny"
author: 'Haolin Zhong (UNI: hz2771)'
date: "2021/12/7"
output: html_document
---

```{r}
library(tidyverse)
```

```{r}
mv = read_csv("./data/small/movies.csv")

mv_genres =
  mv %>% 
  mutate(genres = map(genres, ~str_split(string = .x, pattern = "\\|"))) %>% 
  unnest(genres) %>% 
  unnest(genres)

cut_year = function(string){
  year_str = str_split(string, pattern = "\\(")[[1]]
  year_str = str_remove(year_str[length(year_str)], "\\)")
  return(as.integer(year_str))
}

mv_year = 
  mv %>%
  mutate(
    year = map(title, cut_year),
    year = as.integer(year)
  ) %>% 
  arrange(desc(year))

```

